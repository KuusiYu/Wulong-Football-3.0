<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>足球比赛列表</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <!-- 独立筛选器组件 -->
        <div class="filter-component">
            <!-- 筛选状态显示 -->
            <div class="filter-status" id="filterStatus">
                <span class="status-label">当前筛选：</span>
                <div class="active-filters" id="activeFilters">无</div>
                <!-- 操作按钮区域 -->
                <div class="filter-buttons">
                    <button id="refreshBtn" class="filter-btn refresh-btn" title="刷新比赛数据">
                        <i class="fas fa-sync-alt"></i> 刷新
                    </button>
                    <button id="clearFilterBtn" class="filter-btn clear-btn" title="清除所有筛选条件">
                        <i class="fas fa-trash"></i> 清除筛选
                    </button>
                </div>
            </div>
            
            <!-- 主要筛选区域 -->
            <div class="filter-main">
                <!-- 日期筛选组 -->
                <div class="filter-group">
                    <div class="filter-section">
                        <label for="dateFilter">日期：</label>
                        <div class="date-selector">
                            <input type="date" class="filter-input" id="dateFilter" value="{{ current_date or '' }}" />
                            <button id="dateSearchBtn" class="filter-btn" title="查询该日期比赛">
                                <i class="fas fa-search"></i> 查询
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 分类筛选组 -->
                <div class="filter-group">
                    <div class="filter-section">
                        <label for="leagueFilter">联赛：</label>
                        <select class="filter-select" id="leagueFilter">
                            <option value="">全部</option>
                        </select>
                    </div>

                    <div class="filter-section">
                        <label for="statusFilter">状态：</label>
                        <select class="filter-select" id="statusFilter">
                            <option value="">全部</option>
                            <option value="未开始">未开始</option>
                            <option value="上半场">上半场</option>
                            <option value="中场结束">中场结束</option>
                            <option value="下半场">下半场</option>
                            <option value="加时赛开始">加时赛开始</option>
                            <option value="已结束">已结束</option>
                            <option value="改期">改期</option>
                            <option value="待定">待定</option>
                        </select>
                    </div>
                </div>
                
                <!-- 搜索筛选组 -->
                <div class="filter-group">
                    <div class="filter-section">
                        <label for="teamFilter">球队：</label>
                        <div class="filter-input-wrapper">
                            <input type="text" class="filter-input" id="teamFilter" placeholder="搜索球队" />
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <label for="jcFilter" class="checkbox-label">
                            <input type="checkbox" id="jcFilter" class="filter-checkbox" />
                            <span class="checkbox-text">竞彩比赛</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <table class="match-table">
            <thead>
                <tr>
                    <th>联赛</th>
                    <th>轮数</th>
                    <th>时间</th>
                    <th>状态</th>
                    <th>主队</th>
                    <th>比分</th>
                    <th>客队</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody id="matchTableBody">
                {% for match in matches %}
                <tr>
                    <td class="league" style="background-color: {{ match.league_bgcolor }}; color: #fff;">{{ match.league }}{% if match.jc_mark %}<span class="jc-mark">{{ match.jc_mark }}</span>{% endif %}</td>
                    <td class="round" align="center">{% if match.round %}{{ match.round }}{% endif %}</td>
                    <td class="match-time">{{ match.match_time }}</td>
                    <td class="status {% if match.status == '0' %}status-not-started{% elif match.status == '1' %}status-first-half{% elif match.status == '2' %}status-half-time{% elif match.status == '3' %}status-second-half{% elif match.status == '4' %}status-finished{% elif match.status == '6' %}status-postponed{% elif match.status == '9' %}status-tbd{% elif match.status == '10' %}status-extra-time{% else %}status-unknown{% endif %}">
                        {% if match.status == '0' %}
                            未开始
                        {% elif match.status == '1' %}
                            上半场
                        {% elif match.status == '2' %}
                            中场结束
                        {% elif match.status == '3' %}
                            下半场
                        {% elif match.status == '4' %}
                            已结束
                        {% elif match.status == '6' %}
                            改期
                        {% elif match.status == '9' %}
                            待定
                        {% elif match.status == '10' %}
                            加时赛开始
                        {% else %}
                            {{ match.status }}
                        {% endif %}
                    </td>
                    <td class="team">
                        <div class="team-info">
                            {% if match.home_team_logo %}
                                <img src="{{ match.home_team_logo }}" alt="{{ match.home_team }}" class="team-logo" />
                            {% endif %}
                            <span>{{ match.home_team }}</span>
                        </div>
                    </td>
                    <td class="score">
                        {% if match.status == '0' %}
                            <!-- 未开始比赛显示友好提示 -->
                            <div class="full-time-score">--</div>
                        {% else %}
                            <div class="full-time-score">{{ match.home_score }} - {{ match.away_score }}</div>
                            {% if match.half_score %}
                                <div class="half-time-score">({{ match.half_score }})</div>
                            {% endif %}
                        {% endif %}
                    </td>
                    <td class="team">
                        <div class="team-info">
                            <span>{{ match.away_team }}</span>
                            {% if match.away_team_logo %}
                                <img src="{{ match.away_team_logo }}" alt="{{ match.away_team }}" class="team-logo" />
                            {% endif %}
                        </div>
                    </td>

                    <td>
                        <button class="details-btn" data-fid="{{ match.fid }}" data-sid="{{ match.sid }}" data-league="{{ match.league }}" data-round="{{ match.round }}" data-match-time="{{ match.match_time }}" data-home-team="{{ match.home_team }}" data-away-team="{{ match.away_team }}" data-home-team-logo="{{ match.home_team_logo }}" data-away-team-logo="{{ match.away_team_logo }}">详情</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <!-- 赔率数据模态框 -->
    <div id="oddsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">比赛赔率详情</h3>
                <span class="close-btn">&times;</span>
            </div>
            <div class="modal-body">
                <div class="loading" id="loadingIndicator">
                    <div class="loading-spinner"></div>
                    <p>正在获取赔率数据...</p>
                </div>
                <div class="error" id="errorMessage" style="display: none;">
                    <p>获取赔率数据失败，请稍后重试</p>
                    <button id="retryBtn">重试</button>
                </div>
                <div class="odds-content" id="oddsContent" style="display: none;">
                    <!-- 标签页导航 -->
                    <div class="tab-navigation">
                        <button class="tab-btn active" data-tab="overview">概览</button>
                        <button class="tab-btn" data-tab="process">进程</button>
                        <button class="tab-btn" data-tab="odds">赔率</button>
                        <button class="tab-btn" data-tab="analysis">分析</button>

                    </div>
                    
                    <!-- 标签页内容 -->
                    <div class="tab-content">
                        <!-- 概览标签页 -->
                        <div id="overview" class="tab-pane active">
                            <!-- 平均数据区域 -->
                            <div id="averageDataContainer">
                                <div class="loading">
                                    <p>正在获取平均数据...</p>
                                </div>
                            </div>
                            
                            <!-- 两队交战历史区域 -->
                            <div id="headToHeadContainer">
                                <div class="loading">
                                    <p>正在获取两队交战历史数据...</p>
                                </div>
                            </div>
                            
                            <!-- 近期战绩区域 -->
                            <div id="recentRecordsContainer">
                                <div class="loading">
                                    <p>正在获取近期战绩数据...</p>
                                </div>
                            </div>
                            
                            <!-- 主客场战绩区域 -->
                            <div id="homeAwayRecordsContainer">
                                <div class="loading">
                                    <p>正在获取主客场战绩数据...</p>
                                </div>
                            </div>
                            
                            <!-- 联赛积分榜区域 -->
                            <div id="standingsContainer">
                                <div class="loading">
                                    <p>正在获取联赛积分榜数据...</p>
                                </div>
                            </div>
                            

                        </div>
                        
                        <!-- 进程标签页 -->
                        <div id="process" class="tab-pane">
                            <!-- 子标签导航 -->
                            <div class="sub-tab-navigation">
                                <button class="sub-tab-btn active" data-sub-tab="match-events">比赛进程</button>
                                <button class="sub-tab-btn" data-sub-tab="stats">技术统计</button>
                                <button class="sub-tab-btn" data-sub-tab="players">球员名单</button>
                            </div>
                            
                            <!-- 子标签内容 -->
                            <div class="sub-tab-content">
                                <!-- 比赛进程子标签 -->
                                <div id="match-events" class="sub-tab-pane active">
                                    <div class="loading" id="matchProcessLoading">
                                        <p>正在获取比赛进程数据...</p>
                                    </div>
                                    <div id="matchProcessContent" style="display: none;">
                                        <table width="100%" border="0" cellspacing="0" cellpadding="0" class="mtable">
                                            <tr>
                                                <th width="30">&nbsp;</th>
                                                <th width="150">主队</th>
                                                <th>时间</th>
                                                <th width="150">客队</th>
                                                <th width="30">&nbsp;</th>
                                            </tr>
                                            <tbody id="matchEventsTableBody"></tbody>
                                        </table>
                                        <div class="typical">
                                            图例说明：<i class="fas fa-futbol" style="color: #27ae60;"></i>-入球 <i class="fas fa-futbol" style="color: #e74c3c;"></i>-点球 <i class="fas fa-rotate-right" style="color: #f39c12;"></i>-乌龙 <i class="fas fa-triangle-exclamation" style="color: #f39c12;"></i>-黄牌 <i class="fas fa-circle-exclamation" style="color: #e74c3c;"></i>-红牌 <i class="fas fa-triangle-exclamation" style="color: #e74c3c;"></i><i class="fas fa-circle-exclamation" style="color: #e74c3c;"></i>-两黄变红 <i class="fas fa-xmark-circle" style="color: #e74c3c;"></i>-入球无效 <i class="fas fa-arrow-right-arrow-left" style="color: #3498db;"></i>-换人 <i class="fas fa-arrow-right-to-bracket" style="color: #27ae60;"></i>-换入 <i class="fas fa-arrow-right-from-bracket" style="color: #e74c3c;"></i>-换出
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 技术统计子标签 -->
                                <div id="stats" class="sub-tab-pane">
                                    <div class="loading" id="statsLoading">
                                        <p>正在获取技术统计数据...</p>
                                    </div>
                                    <div id="statsContent" style="display: none;">
                                        <div class="t2">
                                            <div class="title">球队技术统计</div>
                                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                <tr>
                                                    <td width="304" align="right"><h2 class="team_title" id="homeTeamTitle"></h2><span class="team_subtitle"></span></td>
                                                    <td width="140" align="center" class="vs">VS</td>
                                                    <td width="304" align="left"><h2 class="team_title" id="awayTeamTitle"></h2><span class="team_subtitle"></span></td>
                                                </tr>
                                            </table>
                                            <div style="padding:0 50px 30px 50px;">
                                                <table width="100%" border="0" cellspacing="0" cellpadding="0" id="techStatsTable">
                                                    <!-- 统计数据将通过JavaScript动态生成 -->
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 球员名单子标签 -->
                                <div id="players" class="sub-tab-pane">
                                    <div class="loading" id="playersLoading">
                                        <p>正在获取球员名单数据...</p>
                                    </div>
                                    <div id="playersContent" style="display: none;">
                                        <div class="players-container">
                                            <div class="team-players">
                                                <h4>主队球员</h4>
                                                <div class="box_side">
                                                    <div class="title">预计首发阵容</div>
                                                    <div class="content" id="homeStartingLineup"></div>
                                                </div>
                                                <div class="box_side">
                                                    <div class="title">后备</div>
                                                    <div class="content content2" id="homeSubstitutes"></div>
                                                </div>
                                            </div>
                                            <div class="team-players">
                                                <h4>客队球员</h4>
                                                <div class="box_side">
                                                    <div class="title">预计首发阵容</div>
                                                    <div class="content" id="awayStartingLineup"></div>
                                                </div>
                                                <div class="box_side">
                                                    <div class="title">后备</div>
                                                    <div class="content content2" id="awaySubstitutes"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 赔率标签页 -->
                        <div id="odds" class="tab-pane">
                            <div class="odds-tabs">
                                <button class="odds-tab-btn active" data-odds-tab="oupei">欧赔数据</button>
                                <button class="odds-tab-btn" data-odds-tab="yapan">亚盘数据</button>
                                <button class="odds-tab-btn" data-odds-tab="daxiao">大小球数据</button>
                            </div>
                            
                            <div class="odds-tabs-content">
                                <div class="odds-tab-content active" id="oupeiTabContent">
                                    <div class="odds-table-container">
                                        <table class="odds-table" id="oupeiTable">
                                            <thead>
                                                <tr>
                                                    <th>公司</th>
                                                    <th>初盘胜</th>
                                                    <th>初盘平</th>
                                                    <th>初盘负</th>
                                                    <th>即时胜</th>
                                                    <th>即时平</th>
                                                    <th>即时负</th>
                                                    <th>初盘Margin</th>
                                                    <th>即时Margin</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                                
                                <div class="odds-tab-content" id="yapanTabContent">
                                    <div class="odds-table-container">
                                        <table class="odds-table" id="yapanTable">
                                            <thead>
                                                <tr>
                                                    <th>公司</th>
                                                    <th>初盘主队</th>
                                                    <th>初盘盘口</th>
                                                    <th>初盘客队</th>
                                                    <th>即时主队</th>
                                                    <th>即时盘口</th>
                                                    <th>即时客队</th>
                                                    <th>初盘Margin</th>
                                                    <th>即时Margin</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                                
                                <div class="odds-tab-content" id="daxiaoTabContent">
                                    <div class="odds-table-container">
                                        <table class="odds-table" id="daxiaoTable">
                                            <thead>
                                                <tr>
                                                    <th>公司</th>
                                                    <th>初盘大</th>
                                                    <th>初盘盘口</th>
                                                    <th>初盘小</th>
                                                    <th>即时大</th>
                                                    <th>即时盘口</th>
                                                    <th>即时小</th>
                                                    <th>初盘Margin</th>
                                                    <th>即时Margin</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 分析标签页 -->
                        <div id="analysis" class="tab-pane">
                            <!-- 子标签导航 -->
                            <div class="sub-tab-navigation">
                                <button class="sub-tab-btn active" data-sub-tab="odds-analysis">赔率分析</button>
                                <button class="sub-tab-btn" data-sub-tab="data-analysis">数据分析</button>
                                <button class="sub-tab-btn" data-sub-tab="smart-analysis">智能分析</button>
                            </div>
                            
                            <!-- 子标签内容 -->
                            <div class="sub-tab-content">
                                <!-- 赔率分析子标签 -->
                                <div id="odds-analysis" class="sub-tab-pane active">
                                    <div class="analysis-header">
                                        <h4>百家赔率分析</h4>
                                    </div>
                                    
                                    <div class="analysis-grid">
                                        <div class="analysis-card">
                                            <h5>欧赔统计</h5>
                                            <div id="oupeiStats"></div>
                                        </div>
                                        <div class="analysis-card">
                                            <h5>亚盘分析</h5>
                                            <div id="marginStats"></div>
                                        </div>
                                        <div class="analysis-card">
                                            <h5>大小球分析</h5>
                                            <div id="daxiaoStats"></div>
                                        </div>
                                        <div class="analysis-card full-width">
                                            <h5>推荐投注项目</h5>
                                            <div id="trendAnalysis"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 数据分析子标签 -->
                                <div id="data-analysis" class="sub-tab-pane">
                                    <div id="comprehensiveData"></div>
                                </div>
                                
                                <!-- 智能分析子标签 -->
                                <div id="smart-analysis" class="sub-tab-pane">
                                    <div class="analysis-header">
                                        <h4>AI智能分析推荐<button id="copyRecommendationBtn" class="copy-btn" title="复制推荐文" style="margin-left: 10px;">
                                            <i class="fas fa-copy"></i> 复制推荐
                                        </button></h4>
                                    </div>
                                    
                                    <div class="ai-recommendation-container">

                                        <div class="recommendation-content" id="aiRecommendation">
                                            <p>正在生成AI智能分析...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        

                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 引入JavaScript模块 -->
    <script src="/static/oddsData.js"></script>
    <script src="/static/filter.js"></script>
    <script src="/static/modal.js"></script>
    <script src="/static/Match_data.js"></script>

    <script src="/static/script.js"></script>
</body>
</html>